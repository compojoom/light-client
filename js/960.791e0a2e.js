"use strict";(globalThis["webpackChunkraiden_dapp"]=globalThis["webpackChunkraiden_dapp"]||[]).push([[960],{54457:(t,e,s)=>{s.d(e,{Z:()=>U});var i,n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("raiden-dialog",{attrs:{visible:t.visible},on:{close:t.cancel}},[t.error?t._e():s("v-card-title",[t._v(" "+t._s(t.$t("udc-deposit-dialog.title"))+" ")]),t.error?t._e():s("v-card-subtitle",{staticClass:"udc-deposit-dialog__balance"},[t._v(" "+t._s(t.$t("udc-deposit-dialog.available-utility-token",{utilityTokenSymbol:t.udcToken.symbol,utilityTokenBalance:t.utilityTokenBalance}))+" ")]),s("v-card-text",[t.loading||t.error?t.error?s("error-message",{attrs:{error:t.error}}):s("div",{staticClass:"udc-deposit-dialog--progress"},[s("spinner"),t.currentStepDescription?s("span",[t._v(" "+t._s(t.currentStepDescription)+" ")]):t._e()],1):s("amount-input",{attrs:{token:t.udcToken,placeholder:t.$t("transfer.amount-placeholder")},model:{value:t.defaultUtilityTokenAmount,callback:function(e){t.defaultUtilityTokenAmount=e},expression:"defaultUtilityTokenAmount"}}),!t.mainnet||t.loading||t.error?t._e():s("a",{staticClass:"udc-deposit-dialog--uniswap-url",attrs:{href:t.uniswapURL,target:"_blank"}},[t._v(" "+t._s(t.$t("udc-deposit-dialog.uniswap-url-title"))+" ")])],1),t.error?t._e():s("v-card-actions",[s("action-button",{staticClass:"udc-deposit-dialog__action",attrs:{arrow:"","full-width":"",enabled:t.valid&&!t.loading,text:t.$t(t.mainnet?"udc-deposit-dialog.button-main":"udc-deposit-dialog.button"),"data-cy":"udc_deposit_dialog_action"},on:{click:function(e){return t.udcDeposit()}}})],1)],1)},a=[],o=s(59312),r=s(5733),c=s(43535),l=s(57102),u=s(77382),d=s(31034),h=s(52291),_=s(11263),p=s(7674),b=s(53239),m=s(98071),v=s(93840),g=s(55679);(function(t){t["MINT"]="mint",t["APPROVE"]="approve",t["DEPOSIT"]="deposit",t["NONE"]="none"})(i||(i={}));let k=class extends l.w3{constructor(){super(...arguments),this.uniswapURL="",this.defaultUtilityTokenAmount="",this.step=i.NONE,this.loading=!1,this.error=null}cancel(){this.error=null}get utilityTokenBalance(){return v.Z.displayFormat(this.udcToken.balance,this.udcToken.decimals)}get valid(){let t;try{t=c.vz(this.defaultUtilityTokenAmount,this.udcToken.decimals)}catch(e){return!1}return this.mainnet?t.lte(this.udcToken.balance)&&t.gt(r._Y):t.gt(r._Y)}get currentStepDescription(){if(this.step===i.NONE)return"";{const t=`udc-deposit-dialog.progress.${this.step.toString()}`;return this.$t(t,{currency:this.udcToken.symbol})}}mounted(){var t;const e=null!==(t=this.$raiden.getMainAccount())&&void 0!==t?t:this.$raiden.getAccount(),s=c.dF(d.O6.mul(2));this.uniswapURL=`https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency=${this.udcToken.address}&exactAmount=${s}&exactField=outPUT&recipient=${e}`,this.defaultUtilityTokenAmount=this.mainnet?this.utilityTokenBalance:s}async udcDeposit(){this.error=null,this.loading=!0;const t=this.udcToken,e=g.D.parse(this.defaultUtilityTokenAmount,t.decimals);try{!this.mainnet&&e.gt(t.balance)&&(this.step=i.MINT,await this.$raiden.mint(t.address,e)),this.step=i.APPROVE,await this.$raiden.depositToUDC(e,(()=>{this.step=i.DEPOSIT})),this.$emit("done")}catch(s){this.error=s}this.step=i.NONE,this.loading=!1}};(0,o.__decorate)([(0,l.fI)({required:!0,type:Boolean})],k.prototype,"visible",void 0),(0,o.__decorate)([(0,l.y1)()],k.prototype,"cancel",null),k=(0,o.__decorate)([(0,l.wA)({components:{ActionButton:h.Z,RaidenDialog:p.Z,ErrorMessage:b.Z,Spinner:m.Z,AmountInput:_.Z},computed:{...(0,u.rn)("userDepositContract",{udcToken:"token"}),...(0,u.Se)(["mainnet"])}})],k);const f=k,y=f;var C=s(79917),T=s(43453),A=s.n(T),E=s(23399),w=(0,C.Z)(y,n,a,!1,null,"c3777994",null);const U=w.exports;A()(w,{VCardActions:E.h7,VCardSubtitle:E.Qq,VCardText:E.ZB,VCardTitle:E.EB})},76113:(t,e,s)=>{s.r(e),s.d(e,{default:()=>W});var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",staticClass:"select-hub",attrs:{autocomplete:"off","data-cy":"select_hub"},on:{submit:function(e){return e.preventDefault(),t.selectHub()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("div",{staticClass:"select-hub__udc"},[i("div",{staticClass:"select-hub__udc__balance",class:{"low-balance":!t.hasEnoughServiceTokens}},[i("amount-display",{attrs:{"exact-amount":"",amount:t.udcCapacity,token:t.udcToken}}),i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({staticClass:"select-hub__udc__balance__deposit",attrs:{icon:"","data-cy":"select_hub_udc_balance_deposit"},on:{click:function(e){t.showUdcDeposit=!0}}},n),[i("v-img",{attrs:{src:s(50939)}})],1)]}}])},[i("span",[t._v(" "+t._s(t.$t(t.mainnet?"select-hub.service-token-tooltip-main":"select-hub.service-token-tooltip",{token:t.serviceToken}))+" ")])])],1),i("span",{staticClass:"select-hub__udc__description"},[t._v(" "+t._s(t.$t("select-hub.service-token-description").toUpperCase())+" ")])]),i("address-input",{attrs:{value:t.partner,exclude:[t.token.address,t.defaultAccount]},model:{value:t.partner,callback:function(e){t.partner=e},expression:"partner"}}),i("div",{staticClass:"select-hub__hub-list"},[i("hub-list",{attrs:{"token-address":t.token.address},on:{"select-hub":function(e){return t.setSuggestedPartner(e)}}})],1),i("div",{staticClass:"select-hub__token-balance"},[i("token-information",{attrs:{token:t.token}})],1),i("action-button",{staticClass:"select_hub__address-input",attrs:{"data-cy":"select_hub_button",enabled:t.valid,text:t.$t("select-hub.select-button"),sticky:""}}),i("udc-deposit-dialog",{attrs:{visible:t.showUdcDeposit},on:{cancel:function(e){t.showUdcDeposit=!1},done:function(e){return t.mintDone()}}})],1)},n=[],a=s(59312),o=s(5733),r=s(90104),c=s.n(r),l=s(57102),u=s(77382),d=s(52291),h=s(71907),_=s(19261),p=s(54457),b=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"divider"},[s("div",{staticClass:"divider__line"})])}];let v=class extends l.w3{};v=(0,a.__decorate)([(0,l.wA)({})],v);const g=v,k=g;var f=s(79917),y=(0,f.Z)(k,b,m,!1,null,"07173450",null);const C=y.exports;var T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hub-list"},[i("span",{staticClass:"hub-list__header"},[t._v(t._s(t.$t("hub-list.header")))]),t.loadingHubs?i("spinner",{staticClass:"hub-list__loading"}):!t.loadingHubs&&t.requestFailed?i("div",{staticClass:"hub-list__no-hubs"},[t._v(" "+t._s(t.$t("hub-list.error"))+" ")]):t.loadingHubs||0!==t.suggestedHubs.length?t._l(t.suggestedHubs.slice(0,3),(function(e,n){return i("div",{key:n},[i("div",{staticClass:"hub-list__item"},[i("div",{staticClass:"hub-list__item__icon"},[i("v-img",{attrs:{src:s(78966)}})],1),i("span",{staticClass:"hub-list__item__address"},[t._v(t._s(e.address))]),i("span",{staticClass:"hub-list__item__address-mobile"},[t._v(" "+t._s(t.truncate(e.address,10))+" ")]),i("v-btn",{staticClass:"hub-list__item__select-button",attrs:{text:""},on:{click:function(e){return t.selectDeselectHub(n)}}},[t.hubIsSelected(e.address)?i("div",{staticClass:"hub-list__item__select-button__selected-icon"},[i("v-img",{attrs:{src:s(10784)}})],1):i("span",[t._v(" "+t._s(t.$t("hub-list.select-button"))+" ")])])],1)])})):i("div",{staticClass:"hub-list__no-hubs"},[t._v(" "+t._s(t.$t("hub-list.no-results"))+" ")])],2)},A=[],E=s(98071),w=s(93840);let U=class extends l.w3{constructor(){super(...arguments),this.truncate=w.Z.truncate,this.loadingHubs=!0,this.requestFailed=!1,this.suggestedHubs=[],this.selectedHub=""}selectHub(){return this.selectedHub}async mounted(){try{this.suggestedHubs=await this.$raiden.getSuggestedPartners(this.tokenAddress)}catch(t){this.requestFailed=!0}finally{this.loadingHubs=!1}}selectDeselectHub(t){const e=this.suggestedHubs[t].address;this.selectedHub===e?this.selectedHub="":this.selectedHub=e,this.selectHub()}hubIsSelected(t){return this.selectedHub===t}};(0,a.__decorate)([(0,l.fI)({required:!0})],U.prototype,"tokenAddress",void 0),(0,a.__decorate)([(0,l.y1)()],U.prototype,"selectHub",null),U=(0,a.__decorate)([(0,l.wA)({components:{Spinner:E.Z}})],U);const $=U,D=$;var H=s(43453),P=s.n(H),S=s(2138),Z=s(55429),V=(0,f.Z)(D,T,A,!1,null,"76eb1016",null);const x=V.exports;P()(V,{VBtn:S.Z,VImg:Z.Z});var I=s(487),N=s(55093),O=s(28341);let R=class extends((0,l.Wr)(N.Z)){constructor(){super(...arguments),this.partner="",this.valid=!0,this.showUdcDeposit=!1,this.udcCapacity=o._Y,this.hasEnoughServiceTokens=!1}async mounted(){await this.updateUDCCapacity()}get token(){const{token:t}=this.$route.params;return this.getToken(t)||{address:t}}selectHub(){this.navigateToOpenChannel(this.token.address,this.partner)}setSuggestedPartner(t){t?this.partner=t:this.$refs.form.reset()}async updateUDCCapacity(){const{monitoringReward:t}=this.$raiden;this.udcCapacity=await this.$raiden.getUDCCapacity(),this.hasEnoughServiceTokens=!(!t||!this.udcCapacity.gte(t))}get isConnectedToHub(){const{token:t}=this.$route.params;return!c()(this.channels[t])}get serviceToken(){var t;return null!==(t=this.udcToken.symbol)&&void 0!==t?t:this.mainnet?"RDN":"SVT"}async created(){const{token:t}=this.$route.params;var e;O.Z.checkAddressChecksum(t)?(await this.$raiden.fetchAndUpdateTokenData([t]),"number"!==typeof this.token.decimals&&this.navigateToHome(),await this.$raiden.monitorToken(t),this.isConnectedToHub||"goerli"!==this.network.name||(this.partner=null!==(e={VUE_APP_ALLOW_MAINNET:"true",VUE_APP_IMPRINT:"https://raiden.network/privacy.html",VUE_APP_TERMS:"https://github.com/raiden-network/light-client/blob/master/TERMS.md",VUE_APP_CONFIGURATION_URL:"config.production.json",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",VUE_APP_SERVICE_WORKER_DISABLED:"false",BASE_URL:"/"}.VUE_APP_HUB)&&void 0!==e?e:"")):this.navigateToHome()}async mintDone(){this.showUdcDeposit=!1,await this.updateUDCCapacity()}};R=(0,a.__decorate)([(0,l.wA)({components:{TokenInformation:I.Z,Divider:C,AddressInput:h.Z,ActionButton:d.Z,UdcDepositDialog:p.Z,AmountDisplay:_.Z,HubList:x},computed:{...(0,u.rn)(["defaultAccount","channels","network"]),...(0,u.rn)("userDepositContract",{udcToken:"token"}),...(0,u.Se)({getToken:"token",mainnet:"mainnet"})}})],R);const B=R,L=B;var F=s(13082),M=s(56357),q=(0,f.Z)(L,i,n,!1,null,"26d18f76",null);const W=q.exports;P()(q,{VBtn:S.Z,VForm:F.Z,VImg:Z.Z,VTooltip:M.Z})},78966:(t,e,s)=>{t.exports=s.p+"img/hub-healthy.a0aa3aa3.svg"},10784:(t,e,s)=>{t.exports=s.p+"img/hub-selected.fff87497.svg"}}]);