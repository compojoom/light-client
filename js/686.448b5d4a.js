"use strict";(globalThis["webpackChunkraiden_dapp"]=globalThis["webpackChunkraiden_dapp"]||[]).push([[686],{44790:(t,e,s)=>{s.d(e,{Z:()=>v});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",{staticClass:"list-header",attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[s("div",{staticClass:"list-header__header"},[t._v(t._s(t.header))]),s("div",{staticClass:"list-header__divider"})])],1)},a=[],i=s(59312),o=s(57102);let r=class extends o.w3{};(0,i.__decorate)([(0,o.fI)({required:!0})],r.prototype,"header",void 0),r=(0,i.__decorate)([(0,o.wA)({})],r);const l=r,c=l;var d=s(79917),h=s(43453),u=s.n(h),p=s(28508),_=s(53892),m=(0,d.Z)(c,n,a,!1,null,"77a70cf5",null);const v=m.exports;u()(m,{VCol:p.Z,VRow:_.Z})},68785:(t,e,s)=>{s.d(e,{Z:()=>x});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("raiden-dialog",{attrs:{"data-cy":"channel-deposit-dialog",visible:""},on:{close:t.emitClose}},[s("v-card-title",[t._v(t._s(t.$t("channel-deposit.title")))]),s("v-card-text",[s("channel-deposit-action",{attrs:{title:t.$t("channel-deposit.title")},on:{completed:t.emitClose},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.runAction,a=e.confirmButtonLabel;return[s("channel-action-form",{attrs:{"token-address":t.tokenAddress,"partner-address":t.partnerAddress,"confirm-button-label":a,"run-action":n,"hide-token-address":"","hide-partner-address":"","token-amount-editable":"","limit-to-token-balance":""}})]}}])})],1)],1)},a=[],i=s(59312),o=s(57102),r=s(80310),l=s(6395);const c={title:"transfer.steps.deposit.title",description:"transfer.steps.deposit.description",active:!1,completed:!1,failed:!1};let d=class extends((0,o.Wr)(l.Z)){constructor(){super(...arguments),this.depositStep=Object.assign({},c)}get confirmButtonLabel(){return this.$t("channel-deposit.buttons.confirm")}get steps(){return[this.depositStep]}resetStepsState(){this.depositStep=Object.assign({},c)}async handleAction(t){this.depositStep.active=!0,await this.$raiden.deposit(t.tokenAddress,t.partnerAddress,t.tokenAmount),this.depositStep.completed=!0}};d=(0,i.__decorate)([o.wA],d);const h=d,u=h;var p,_,m=s(79917),v=(0,m.Z)(u,p,_,!1,null,null,null);const f=v.exports;var b=s(7674);let w=class extends o.w3{emitClose(){}};(0,i.__decorate)([(0,o.fI)({type:String,required:!0})],w.prototype,"tokenAddress",void 0),(0,i.__decorate)([(0,o.fI)({type:String,required:!0})],w.prototype,"partnerAddress",void 0),(0,i.__decorate)([(0,o.y1)("close")],w.prototype,"emitClose",null),w=(0,i.__decorate)([(0,o.wA)({components:{ChannelActionForm:r.Z,ChannelDepositAction:f,RaidenDialog:b.Z}})],w);const y=w,g=y;var k=s(43453),C=s.n(k),$=s(23399),Z=(0,m.Z)(g,n,a,!1,null,null,null);const x=Z.exports;C()(Z,{VCardText:$.ZB,VCardTitle:$.EB})},28063:(t,e,s)=>{s.d(e,{Z:()=>f});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("raiden-dialog",{staticClass:"error-dialog",attrs:{visible:t.showDialog},on:{close:t.dismiss}},[s("v-card-text",[s("error-message",{attrs:{error:t.error}})],1)],1)},a=[],i=s(59312),o=s(57102),r=s(7674),l=s(53239);let c=class extends o.w3{dismiss(){return!0}get showDialog(){return null!==this.error}};(0,i.__decorate)([(0,o.fI)({required:!0})],c.prototype,"error",void 0),(0,i.__decorate)([(0,o.y1)()],c.prototype,"dismiss",null),c=(0,i.__decorate)([(0,o.wA)({components:{RaidenDialog:r.Z,ErrorMessage:l.Z}})],c);const d=c,h=d;var u=s(79917),p=s(43453),_=s.n(p),m=s(23399),v=(0,u.Z)(h,n,a,!1,null,"3d377652",null);const f=v.exports;_()(v,{VCardText:m.ZB})},2775:(t,e,s)=>{s.r(e),s.d(e,{default:()=>mt});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"channels"},[s("span",{staticClass:"font-weight-light ml-3"},[t._v(" "+t._s(t.$t("channels.title"))+" ")]),s("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[s("span",t._g({staticClass:"font-weight-medium"},n),[t._v(" "+t._s(t.$t("channels.token-info",{name:t.truncate(t.token.name,22),symbol:t.truncate(t.token.symbol,8)}))+" ")])]}}])},[s("span",[t._v(" "+t._s(t.token.address)+" ")])]),t.open.length>0?s("list-header",{staticClass:"channels__header",attrs:{header:t.$t("channels.open.header")}}):t._e(),s("div",{staticClass:"channels__wrapper"},[t.open.length>0?s("channel-list",{attrs:{token:t.token,channels:t.open,"selected-channel":t.selectedChannel,busy:t.busy},on:{action:t.onAction}}):t._e(),t.closed.length>0?s("list-header",{staticClass:"channels__header",attrs:{header:t.$t("channels.closed.header")}}):t._e(),t.closed.length>0?s("channel-list",{attrs:{token:t.token,channels:t.closed,"selected-channel":t.selectedChannel,busy:t.busy},on:{action:t.onAction}}):t._e(),t.settleable.length>0?s("list-header",{staticClass:"channels__header",attrs:{header:t.$t("channels.settleable.header")}}):t._e(),t.settleable.length>0?s("channel-list",{attrs:{token:t.token,channels:t.settleable,"selected-channel":t.selectedChannel,busy:t.busy},on:{action:t.onAction}}):t._e()],1),s("v-snackbar",{attrs:{"multi-line":!0,timeout:3e3,bottom:""},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.message)+" "),s("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v(" "+t._s(t.$t("channels.snackbar-close"))+" ")])],1),t.selectedChannel&&t.action?s("channel-dialogs",{attrs:{action:t.action,channel:t.selectedChannel},on:{dismiss:function(e){t.action=null,t.selectedChannel=null},message:function(e){return t.showMessage(e)},busy:function(e){return t.setBusyState(e)}}}):t._e()],1)},a=[],i=s(59312),o=s(57102),r=s(77382),l=s(31034),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.error?s("error-dialog",{attrs:{error:t.error},on:{dismiss:t.dismiss}}):t.channel&&"close"===t.action?s("confirmation-dialog",{attrs:{identifier:t.channel.id,"positive-action":t.$t("confirmation.buttons.close"),visible:t.visible},on:{confirm:function(e){return t.close()},cancel:function(e){return t.dismiss()}},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("channel-list.channel.close_dialog.title"))+" ")]},proxy:!0}])},[t._v(" "+t._s(t.$t("channel-list.channel.close_dialog.description"))+" ")]):t.channel&&"settle"===t.action?s("confirmation-dialog",{attrs:{identifier:t.channel.id,"positive-action":t.$t("confirmation.buttons.settle"),visible:t.visible},on:{confirm:function(e){return t.settle()},cancel:function(e){return t.dismiss()}},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("channel-list.channel.settle_dialog.title"))+" ")]},proxy:!0}])},[t._v(" "+t._s(t.$t("channel-list.channel.settle_dialog.description",{partner:t.channel.partner,token:t.channel.token}))+" ")]):t.channel&&"deposit"===t.action?s("channel-deposit-dialog",{attrs:{"token-address":t.token.address,"partner-address":t.channel.partner},on:{close:function(e){return t.dismiss()}}}):t.channel&&"withdraw"===t.action?s("channel-withdraw-dialog",{attrs:{identifier:t.channel.id,token:t.token,channel:t.channel,visible:t.visible,loading:t.withdrawInProgress,done:!1},on:{"withdraw-tokens":function(e){return t.withdraw(e)},cancel:function(e){return t.dismiss()}}}):t._e()},d=[],h=s(68785),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("raiden-dialog",{staticClass:"channel-withdraw",attrs:{"data-cy":"channel_withdraw",visible:t.visible},on:{close:t.cancel}},[n("v-card-title",[t._v(" "+t._s(t.title)+" ")]),n("v-card-text",[t.loading?[n("spinner"),n("span",[t._v(t._s(t.$t("channel-withdraw.dialog.description")))])]:t.done?[n("v-img",{staticClass:"channel-withdraw__done my-4",attrs:{src:s(44036)}}),n("span",[t._v(t._s(t.$t("channel-withdraw.done.description")))])]:n("v-form",{on:{submit:function(e){return e.preventDefault(),t.withdrawTokens()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("amount-input",{staticClass:"channel-withdraw__input",attrs:{"data-cy":"channel_withdraw_input",token:t.token,max:t.channel.ownWithdrawable,limit:""},model:{value:t.withdraw,callback:function(e){t.withdraw=e},expression:"withdraw"}}),n("action-button",{staticClass:"mt-8",attrs:{id:"confirm-"+t.identifier,"data-cy":"channel_withdraw_button",enabled:t.valid,text:t.$t("channel-withdraw.buttons.confirm"),"full-width":""}})],1)],2)],1)},p=[],_=s(52291),m=s(11263),v=s(7674),f=s(98071),b=s(55679);let w=class extends o.w3{constructor(){super(...arguments),this.withdraw="",this.valid=!1}get title(){return this.loading?this.$t("channel-withdraw.dialog.title"):this.done?this.$t("channel-withdraw.done.title"):this.$t("channel-withdraw.dialog.label")}onVisibilityChanged(t){t&&this.updateWithdraw()}mounted(){this.updateWithdraw()}async updateWithdraw(){var t;this.withdraw=0===(null!==(t=this.token.decimals)&&void 0!==t?t:18)?"0":"0.0",await this.$raiden.fetchAndUpdateTokenData([this.token.address])}cancel(){return!0}withdrawTokens(){const t=b.D.parse(this.withdraw,this.token.decimals);t.isZero()||this.$emit("withdraw-tokens",t)}};(0,i.__decorate)([(0,o.fI)({required:!0})],w.prototype,"identifier",void 0),(0,i.__decorate)([(0,o.fI)({required:!0,type:Boolean,default:!1})],w.prototype,"visible",void 0),(0,i.__decorate)([(0,o.fI)({required:!0})],w.prototype,"token",void 0),(0,i.__decorate)([(0,o.fI)({required:!0})],w.prototype,"channel",void 0),(0,i.__decorate)([(0,o.fI)({required:!0})],w.prototype,"loading",void 0),(0,i.__decorate)([(0,o.fI)({required:!1,default:!1})],w.prototype,"done",void 0),(0,i.__decorate)([(0,o.RL)("visible")],w.prototype,"onVisibilityChanged",null),(0,i.__decorate)([(0,o.y1)()],w.prototype,"cancel",null),w=(0,i.__decorate)([(0,o.wA)({components:{AmountInput:m.Z,ActionButton:_.Z,RaidenDialog:v.Z,Spinner:f.Z}})],w);const y=w,g=y;var k=s(79917),C=s(43453),$=s.n(C),Z=s(23399),x=s(13082),A=s(55429),I=(0,k.Z)(g,u,p,!1,null,"1fc66e0e",null);const V=I.exports;$()(I,{VCardText:Z.ZB,VCardTitle:Z.EB,VForm:x.Z,VImg:A.Z});var D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("raiden-dialog",{staticClass:"confirmation",attrs:{visible:t.visible},on:{close:t.cancel}},[s("v-card-title",[t._t("header")],2),s("v-card-text",[t._t("default")],2),s("v-card-actions",[s("action-button",{staticClass:"confirmation__button",attrs:{id:"confirm-"+t.identifier,enabled:!0,text:t.positiveAction,"full-width":""},on:{click:function(e){return t.confirm()}}})],1)],1)},S=[];let T=class extends o.w3{cancel(){return!0}confirm(){return!0}};(0,i.__decorate)([(0,o.fI)({required:!0,type:Boolean,default:!1})],T.prototype,"visible",void 0),(0,i.__decorate)([(0,o.fI)({required:!0})],T.prototype,"positiveAction",void 0),(0,i.__decorate)([(0,o.fI)({required:!0})],T.prototype,"identifier",void 0),(0,i.__decorate)([(0,o.y1)()],T.prototype,"cancel",null),(0,i.__decorate)([(0,o.y1)()],T.prototype,"confirm",null),T=(0,i.__decorate)([(0,o.wA)({components:{RaidenDialog:v.Z,ActionButton:_.Z}})],T);const q=T,B=q;var E=(0,k.Z)(B,D,S,!1,null,null,null);const L=E.exports;$()(E,{VCardActions:Z.h7,VCardText:Z.ZB,VCardTitle:Z.EB});var z=s(28063);let W=class extends o.w3{constructor(){super(...arguments),this.depositInProgress=!1,this.withdrawInProgress=!1,this.visible=!0,this.error=null}get token(){return this.getToken(this.channel.token)}message(t){return t}dismiss(t){this.depositInProgress=!1,this.busy([!1,t])}busy(t){return t}async deposit(t){const{token:e,partner:s,id:n}=this.channel;this.busy([!0,n]);try{this.depositInProgress=!0,await this.$raiden.deposit(e,s,t),this.message(this.$t("channel-list.messages.deposit.success")),this.dismiss(n)}catch(a){this.message(this.$t("channel-list.messages.deposit.failure")),this.error=a}this.busy([!1,n])}async withdraw(t){const{token:e,partner:s,id:n}=this.channel;this.busy([!0,n]);try{this.withdrawInProgress=!0,await this.$raiden.withdraw(e,s,t),this.message(this.$t("channel-list.messages.withdraw.success")),this.dismiss(n)}catch(a){this.message(this.$t("channel-list.messages.withdraw.failure")),this.error=a}this.busy([!1,n])}async close(){const{token:t,partner:e,id:s}=this.channel;this.busy([!0,s]),this.visible=!1;try{await this.$raiden.closeChannel(t,e),this.message(this.$t("channel-list.messages.close.success")),this.dismiss(s)}catch(n){this.message(this.$t("channel-list.messages.close.failure")),this.error=n}this.busy([!1,s])}async settle(){const{token:t,partner:e,id:s}=this.channel;this.busy([!0,s]),this.visible=!1;try{await this.$raiden.settleChannel(t,e),this.message(this.$t("channel-list.messages.settle.success")),this.dismiss(s)}catch(n){this.message(this.$t("channel-list.messages.settle.failure")),this.error=n}this.busy([!1,s])}};(0,i.__decorate)([(0,o.fI)({required:!0})],W.prototype,"channel",void 0),(0,i.__decorate)([(0,o.fI)({required:!0})],W.prototype,"action",void 0),(0,i.__decorate)([(0,o.y1)()],W.prototype,"message",null),(0,i.__decorate)([(0,o.y1)()],W.prototype,"dismiss",null),(0,i.__decorate)([(0,o.y1)()],W.prototype,"busy",null),W=(0,i.__decorate)([(0,o.wA)({components:{ChannelDepositDialog:h.Z,ChannelWithdrawDialog:V,ConfirmationDialog:L,ErrorDialog:z.Z},computed:{...(0,r.Se)({getToken:"token"})}})],W);const F=W,R=F;var P=(0,k.Z)(R,c,d,!1,null,"2ac7c0a0",null);const H=P.exports;var M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{staticClass:"channel-list",attrs:{"data-cy":"channel_list","no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-list",{staticClass:"channel-list__channels",attrs:{flat:""}},t._l(t.channels,(function(e){return n("v-list-item",{key:e.partner,staticClass:"channel-list__channels__channel"},[n("v-list-item-avatar",[n("img",{attrs:{src:t.$blockie(e.partner),alt:t.$t("channel-list.channel.blockie_alt")}})]),n("v-list-item-content",[n("v-list-item-title",[n("address-display",{attrs:{address:e.partner}})],1),n("v-list-item-subtitle",[n("span",[t._v(" "+t._s(t.$t("channel-list.channel.capacity",{value:t.displayFormat(e.capacity,t.token.decimals||0)}))+" ")])])],1),n("div",{staticClass:"channel-list__capacity-buttons"},[n("v-btn",{staticClass:"channel-list__capacity-buttons__deposit",attrs:{id:"deposit-"+e.id,disabled:"open"!==e.state||!!t.busy[e.id],"data-cy":"channel_action_button",icon:""},on:{click:function(s){return t.action(["deposit",e])}}},[n("img",{attrs:{src:s(88759)}})]),n("v-btn",{staticClass:"channel-list__capacity-buttons__withdrawal",attrs:{id:"withdraw-"+e.id,disabled:"open"!==e.state||!!t.busy[e.id],"data-cy":"channel_action_button",icon:""},on:{click:function(s){return t.action(["withdraw",e])}}},[n("img",{attrs:{src:s(21597)}})])],1),n("div",{attrs:{"data-cy":"channel_action"}},[t.selectedChannel&&e.id===t.selectedChannel.id&&t.busy[e.id]?n("v-btn",{staticClass:"channel-list__action-button",attrs:{id:"busy-"+e.id,disabled:""}},[n("spinner",{attrs:{size:18,width:2}})],1):"open"===e.state||"closing"===e.state?n("v-btn",{staticClass:"channel-list__action-button",attrs:{id:"close-"+e.id,disabled:!!t.busy[e.id]},on:{click:function(s){return t.action(["close",e])}}},[t._v(" "+t._s(t.$t("channel-actions.close"))+" ")]):n("v-btn",{staticClass:"channel-list__action-button",attrs:{id:"settle-"+e.id,disabled:"closed"===e.state||!!t.busy[e.id]},on:{click:function(s){return t.action(["settle",e])}}},[t._v(" "+t._s(t.$t("channel-actions.settle"))+" ")])],1)],1)})),1)],1)],1)},j=[],O=s(98835),U=s(93840),N=s(31113);let G=class extends((0,o.Wr)(N.Z)){constructor(){super(...arguments),this.displayFormat=U.Z.displayFormat,this.capitalizeFirst=U.Z.capitalizeFirst}action(t){return t}};(0,i.__decorate)([(0,o.fI)({required:!0})],G.prototype,"channels",void 0),(0,i.__decorate)([(0,o.fI)({required:!0})],G.prototype,"token",void 0),(0,i.__decorate)([(0,o.fI)({default:null})],G.prototype,"selectedChannel",void 0),(0,i.__decorate)([(0,o.fI)()],G.prototype,"busy",void 0),(0,i.__decorate)([(0,o.y1)()],G.prototype,"action",null),G=(0,i.__decorate)([(0,o.wA)({components:{AddressDisplay:O.Z,Spinner:f.Z},computed:(0,r.rn)(["blockNumber"])})],G);const J=G,K=J;var Q=s(2138),X=s(28508),Y=s(50948),tt=s(19021),et=s(48727),st=s(3950),nt=s(53892),at=(0,k.Z)(K,M,j,!1,null,"f356ddc4",null);const it=at.exports;$()(at,{VBtn:Q.Z,VCol:X.Z,VList:Y.Z,VListItem:tt.Z,VListItemAvatar:et.Z,VListItemContent:st.km,VListItemSubtitle:st.oZ,VListItemTitle:st.V9,VRow:nt.Z});var ot=s(44790),rt=s(55093),lt=s(28341);let ct=class extends((0,o.Wr)(rt.Z)){constructor(){super(...arguments),this.message="",this.snackbar=!1,this.selectedChannel=null,this.action=null,this.busy={},this.truncate=U.Z.truncate}setBusyState([t,e]){this.busy[e]=t}onAction([t,e]){this.selectedChannel=e,this.action=t}get open(){return this.channels(this.$route.params.token).filter((t=>t.state===l.Dz.open))}get closed(){return this.channels(this.$route.params.token).filter((t=>t.state===l.Dz.closed||t.state===l.Dz.closing))}get settleable(){return this.channels(this.$route.params.token).filter((t=>t.state===l.Dz.settling||t.state===l.Dz.settleable))}get token(){const{token:t}=this.$route.params;return this.tokens[t]||{address:t}}async created(){const{token:t}=this.$route.params;lt.Z.checkAddressChecksum(t)?(await this.$raiden.fetchAndUpdateTokenData([t]),"number"!==typeof this.token.decimals&&this.navigateToHome()):this.navigateToHome()}showMessage(t){this.message=t,this.snackbar=!0}};ct=(0,i.__decorate)([(0,o.wA)({components:{ChannelDialogs:H,ListHeader:ot.Z,ChannelList:it},computed:{...(0,r.rn)(["tokens"]),...(0,r.Se)(["channels"])}})],ct);const dt=ct,ht=dt;var ut=s(76191),pt=s(56357),_t=(0,k.Z)(ht,n,a,!1,null,"b0536230",null);const mt=_t.exports;$()(_t,{VBtn:Q.Z,VSnackbar:ut.Z,VTooltip:pt.Z})},88759:(t,e,s)=>{t.exports=s.p+"img/deposit.aedf58cf.svg"},21597:(t,e,s)=>{t.exports=s.p+"img/withdrawal.560134b7.svg"}}]);