(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3eadbefa"],{"65ab":function(e,t,n){"use strict";n.r(t);var r=n("d1f3"),a=n("c297"),i=n("63ab"),o=n("0b2c"),s=n("6bf1"),c=n("d533"),u=Number.MIN_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER+1,f=Number.MIN_SAFE_INTEGER+2,l=/^[^a-zA-Z_$]|[^a-zA-Z0-9_$]+/,v=/\\.|(^|\.)[^a-zA-Z_$]|[^a-zA-Z0-9_$.]+/;function _(e,t){return t?v.test(e):l.test(e)}var p=new RegExp(l.source,"g"),h=new RegExp(v.source,"g"),m="\\".charCodeAt(0);const g=".".charCodeAt(0);function b(e,t){var n=function(e){for(var n="",r=0;r<e.length;r++){var a=e.charCodeAt(r);if(a===g&&t&&0===r)n+=".";else{if(a===m&&t)continue;n+="_c"+a+"_"}}return n};return t?e.replace(h,n):e.replace(p,n)}function y(e){for(var t of Object.keys(e)){if(_(t))return!0;if(null===e[t]||"boolean"===typeof e[t])return!0;if("object"===typeof e[t])return y(e[t])}}function w(e){if(!y(e))return!1;var t=Array.isArray(e),n=t?[]:{};return Object.keys(e).forEach((function(r){var a=t?r:b(r);null===e[r]?n[a]=u:"boolean"===typeof e[r]?n[a]=e[r]?f:d:"object"===typeof e[r]?n[a]=w(e[r]):n[a]=e[r]})),n}var j="docs",O="meta";function k(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(Object(s["n"])(s["d"],n,t.type))}}function x(e,t,n,a){return delete n._attachments[e].stub,a?(n._attachments[e].data=t.attachments[n._attachments[e].digest].data,Promise.resolve()):new Promise((function(a){var i=t.attachments[n._attachments[e].digest].data;Object(r["i"])(i,(function(t){n._attachments[e].data=Object(r["g"])(t),delete n._attachments[e].length,a()}))}))}function D(e,t){var n=e.views[t].options&&e.views[t].options.def&&e.views[t].options.def.fields||[];return n.map((function(e){return"string"===typeof e?e:Object.keys(e)[0]}))}function I(e){return"_find_idx/"+e.join("/")}function E(e){return["deleted"].concat(e.map((function(e){return e in["_id","_rev","_deleted","_attachments"]?e.substr(1):"data."+b(e,!0)})))}var R=1,q=Math.pow(10,13);function B(){return q*R+(new Date).getTime()}function P(e){return Math.floor(e/q)}function A(e,t){var n=e.transaction.objectStore(j),r=n.getAll(IDBKeyRange.bound("_design/","_design/ï¿¿"));r.onsuccess=function(e){var r=e.target.result,a=Array.from(n.indexNames),i=r.filter((function(e){return 0===e.deleted&&e.revs[e.rev].data.views})).map((function(e){return e.revs[e.rev].data})).reduce((function(e,t){return Object.keys(t.views).reduce((function(e,n){var r=D(t,n);return r&&r.length>0&&(e[I(r)]=E(r)),e}),e)}),{}),o=Object.keys(i),s=["seq"];a.forEach((function(e){-1===s.indexOf(e)&&-1===o.indexOf(e)&&n.deleteIndex(e)}));var c=o.filter((function(e){return-1===a.indexOf(e)}));try{c.forEach((function(e){n.createIndex(e,i[e])}))}catch(u){t(u)}}}function S(e,t){if(t<1){var n=e.createObjectStore(j,{keyPath:"id"});n.createIndex("seq","seq",{unique:!0}),e.createObjectStore(O,{keyPath:"id"})}}function N(e,t,n,r,a){var i=n.versionchanged?indexedDB.open(n.name):indexedDB.open(n.name,B());i.onupgradeneeded=function(e){if(e.oldVersion>0&&e.oldVersion<q)throw new Error('Incorrect adapter: you should specify the "idb" adapter to open this DB');if(0===e.oldVersion&&e.newVersion<q)throw indexedDB.deleteDatabase(n.name),new Error("Database was deleted while open");var t=e.target.result,r=P(e.oldVersion);S(t,r),A(i,a)},i.onblocked=function(e){console.error("onblocked, this should never happen",e)},i.onsuccess=function(t){var a=t.target.result;a.onabort=function(t){console.error("Database has a global failure",t.target.error),delete e[n.name],a.close()},a.onversionchange=function(){console.log("Database was made stale, closing handle"),e[n.name].versionchanged=!0,a.close()},a.onclose=function(){console.log("Database was made stale, closing handle"),n.name in e&&(e[n.name].versionchanged=!0)};var i={id:O},s=a.transaction([O],"readwrite");s.oncomplete=function(){r({idb:a,metadata:i})};var c=s.objectStore(O);c.get(O).onsuccess=function(e){i=e.target.result||i;var t=!1;"doc_count"in i||(t=!0,i.doc_count=0),"seq"in i||(t=!0,i.seq=0),"db_uuid"in i||(t=!0,i.db_uuid=Object(o["n"])()),t&&c.put(i)}},i.onerror=function(e){a(e.target.error)}}function C(e,t,n){return e[n.name]&&!e[n.name].versionchanged||(n.versionchanged=e[n.name]&&e[n.name].versionchanged,e[n.name]=new Promise((function(r,a){N(e,t,n,r,a)}))),e[n.name]}function K(e,t){t(null,{doc_count:e.doc_count,update_seq:e.seq})}function T(e,t,n,r){if(e.error)return r(e.error);e.txn.objectStore(j).get(t).onsuccess=function(t){var a,i=t.target.result;if(a=n.rev?n.latest?Object(c["e"])(n.rev,i):n.rev:i&&i.rev,i&&(!i.deleted||n.rev)&&a in i.revs){var o=i.revs[a].data;o._id=i.id,o._rev=a,r(null,{doc:o,metadata:i,ctx:e})}else r(Object(s["n"])(s["g"],"missing"))}}function F(e,t,n){if(t.binary)return n(null,e);Object(r["i"])(e,(function(e){n(null,Object(r["g"])(e))}))}function M(e,t,n,r,a,i){if(e.error)return i(e.error);var o;e.txn.objectStore(j).get(t).onsuccess=function(e){var t=e.target.result,r=t.revs[a.rev||t.rev].data,i=r._attachments[n].digest;o=t.attachments[i].data},e.txn.oncomplete=function(){F(o,a,i)},e.txn.onabort=i}function V(e,t,n,o,u,d,f){var l,v,_,p=[],h=[],m=u.revs_limit||1e3,g=-1===u.name.indexOf("-mrview-");const b=u.auto_compaction;function y(e){return/^_local/.test(e.id)?1:m}function x(e){return"missing"===e.rev_tree[0].ids[1].status}function D(e){try{return atob(e)}catch(t){return{error:Object(s["n"])(s["a"],"Attachment is not a valid base64 string")}}}function I(e,t){var n=0,r={};function a(a){a.target.result&&(r[a.target.result.id]=a.target.result),++n===t.length&&R(e,t,r)}t.forEach((function(t){e.objectStore(j).get(t.id).onsuccess=a}))}function E(e,t,n){return e.revs[t]&&e.revs[t].data._attachments&&Object.values(e.revs[t].data._attachments).find((function(e){return e.digest===n}))}function R(e,t,r){t.forEach((function(t,a){var i;if("was_delete"in n&&!Object.prototype.hasOwnProperty.call(r,t.id))i=Object(s["n"])(s["g"],"deleted");else if(n.new_edits&&!Object.prototype.hasOwnProperty.call(r,t.id)&&x(t))i=Object(s["n"])(s["l"]);else if(Object.prototype.hasOwnProperty.call(r,t.id)){if(i=B(e,t,r[t.id]),0==i)return}else{var o=Object(c["f"])([],t.rev_tree[0],y(t));t.rev_tree=o.tree,t.stemmedRevs=o.stemmedRevs,i=t,i.isNewDoc=!0,i.wasDeleted=t.revs[t.rev].deleted?1:0}i.error?p[a]=i:(r[i.id]=i,_=a,P(e,i,a))}))}function q(e){var t={id:e.metadata.id,rev:e.metadata.rev,rev_tree:e.metadata.rev_tree,revs:e.metadata.revs||{}};return t.revs[t.rev]={data:e.data,deleted:e.metadata.deleted},t}function B(e,t,r){if(t.rev in r.revs&&!n.new_edits)return!1;var i=/^1-/.test(t.rev);if(r.deleted&&!t.deleted&&n.new_edits&&i){var o=t.revs[t.rev].data;o._rev=r.rev,o._id=r.id,t=q(Object(a["d"])(o,n.new_edits,u))}var d=Object(c["f"])(r.rev_tree,t.rev_tree[0],y(t));t.stemmedRevs=d.stemmedRevs,t.rev_tree=d.tree;var f=r.revs;f[t.rev]=t.revs[t.rev],t.revs=f,t.attachments=r.attachments;var l=n.new_edits&&(r.deleted&&t.deleted||!r.deleted&&"new_leaf"!==d.conflicts||r.deleted&&!t.deleted&&"new_branch"===d.conflicts||r.rev===t.rev);return l?Object(s["n"])(s["l"]):(t.wasDeleted=r.deleted,t)}function P(e,t,n){var r=Object(c["i"])(t),a=t.rev,i=/^_local/.test(t.id),u=t.revs[r].data;const d=t.isNewDoc;if(g){var f=w(u);f?(t.data=f,delete t.data._attachments):t.data=u}else t.data=u;if(t.rev=r,t.deleted=t.revs[r].deleted?1:0,!i){t.seq=++o.seq;var l=0;t.isNewDoc?l=t.deleted?0:1:t.wasDeleted!==t.deleted&&(l=t.deleted?-1:1),o.doc_count+=l}delete t.isNewDoc,delete t.wasDeleted;let _=t.stemmedRevs||[];if(b&&!d){const e=Object(c["b"])(t);e.length&&(_=_.concat(e))}if(_.length&&_.forEach((function(e){delete t.revs[e]})),delete t.stemmedRevs,"attachments"in t||(t.attachments={}),u._attachments)for(var h in u._attachments){var m=u._attachments[h];if(m.stub){if(!(m.digest in t.attachments))return v=Object(s["n"])(s["i"]),void e.abort();E(t,a,m.digest)&&(t.attachments[m.digest].revs[a]=!0)}else t.attachments[m.digest]=m,t.attachments[m.digest].revs={},t.attachments[m.digest].revs[a]=!0,u._attachments[h]={stub:!0,digest:m.digest,content_type:m.content_type,length:m.length,revpos:parseInt(a,10)}}if(i&&t.deleted)return e.objectStore(j).delete(t.id).onsuccess=function(){p[n]={ok:!0,id:t.id,rev:"0-0"}},void A(n);e.objectStore(j).put(t).onsuccess=function(){p[n]={ok:!0,id:t.id,rev:a},A(n)}}function A(e){e===_&&l.objectStore(O).put(o)}function S(e){if(e.stub)return Promise.resolve(e);var t;if("string"===typeof e.data){if(t=D(e.data),t.error)return Promise.reject(t.error);e.data=Object(r["c"])(t,e.content_type)}else t=e.data;return new Promise((function(n){Object(i["a"])(t,(function(r){e.digest="md5-"+r,e.length=t.size||t.length||0,n(e)}))}))}function N(){var e=h.map((function(e){var t=e.revs[e.rev].data;if(!t._attachments)return Promise.resolve(t);var n=Object.keys(t._attachments).map((function(e){return t._attachments[e].name=e,S(t._attachments[e])}));return Promise.all(n).then((function(e){var n={};return e.forEach((function(e){n[e.name]=e,delete e.name})),t._attachments=n,t}))}));return Promise.all(e)}for(var C=0,K=t.docs.length;C<K;C++){var T;try{T=Object(a["d"])(t.docs[C],n.new_edits,u)}catch(F){T=F}if(T.error)return f(T);h.push(q(T))}N().then((function(){e._openTransactionSafely([j,O],"readwrite",(function(e,t){if(e)return f(e);l=t,l.onabort=function(){f(v||Object(s["n"])(s["m"],"transaction was aborted"))},l.ontimeout=k(f),l.oncomplete=function(){d.notify(u.name),f(null,p)},I(l,h)}))})).catch((function(e){f(e)}))}function z(e,t,n){var r=new Array(e.length),a=0;e.forEach((function(i,o){t.get(i).onsuccess=function(t){t.target.result?r[o]=t.target.result:r[o]={key:i,error:"not_found"},a++,a===e.length&&r.forEach((function(e){n(e)}))}}))}function L(e,t,n,r,a){try{if(e&&t)return a?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return a?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return a?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(i){return{error:i}}return null}function G(e,t,n,r){if("DataError"===n.name&&0===n.code){var a={total_rows:t.doc_count,offset:e.skip,rows:[]};return e.update_seq&&(a.update_seq=t.seq),r(null,a)}r(Object(s["n"])(s["d"],n.name,n.message))}function Z(e,t,n,r){if(e.error)return r(e.error);if(0===n.limit){var a={total_rows:t.doc_count,offset:n.skip,rows:[]};return n.update_seq&&(a.update_seq=t.seq),r(null,a)}var i,o=[],s=[],u="startkey"in n&&n.startkey,d="endkey"in n&&n.endkey,f="key"in n&&n.key,l="keys"in n&&n.keys,v=n.skip||0,_="number"===typeof n.limit?n.limit:-1,p=!1!==n.inclusive_end,h="descending"in n&&n.descending?"prev":null;if(!l&&(i=L(u,d,p,f,h),i&&i.error))return G(n,t,i.error,r);var m=e.txn.objectStore(j);if(e.txn.oncomplete=y,l)return z(n.keys,m,b);function g(e,t){var r=t.revs[t.rev].data;if(e.doc=r,e.doc._id=t.id,e.doc._rev=t.rev,n.conflicts){var a=Object(c["a"])(t);a.length&&(e.doc._conflicts=a)}if(n.attachments&&r._attachments)for(var i in r._attachments)s.push(x(i,t,e.doc,n.binary))}function b(e){if(e.error&&l)return o.push(e),!0;var t={id:e.id,key:e.id,value:{rev:e.rev}},r=e.deleted;if(r)l&&(o.push(t),t.value.deleted=!0,t.doc=null);else if(v--<=0&&(o.push(t),n.include_docs&&g(t,e),0===--_))return!1;return!0}function y(){Promise.all(s).then((function(){var e={total_rows:t.doc_count,offset:0,rows:o};n.update_seq&&(e.update_seq=t.seq),r(null,e)}))}var w=h?m.openCursor(i,h):m.openCursor(i);w.onsuccess=function(e){var t=e.target.result&&e.target.result.value;if(t){if(/^_local/.test(t.id))return e.target.result.continue();var n=b(t);n&&e.target.result.continue()}}}function $(e,t,n,r,a){if(e.error)return a.complete(e.error);if(a.continuous){var i=r.name+":"+Object(o["n"])();return t.addListener(r.name,i,n,a),t.notify(r.name),{cancel:function(){t.removeListener(r.name,i)}}}var s="limit"in a?a.limit:-1;0===s&&(s=1);var c,u=e.txn.objectStore(j).index("seq"),d=Object(o["d"])(a),f=0,l=a.since||0,v=[],_=[];function p(e){if(e.target.result){var t=e.target.result,n=t.value;if(n.data=n.revs[n.rev].data,n.data._id=n.id,n.data._rev=n.rev,n.deleted&&(n.data._deleted=!0),a.doc_ids&&-1===a.doc_ids.indexOf(n.id))return t.continue();var r=a.processChange(n.data,n,a);r.seq=n.seq,l=n.seq;var i=d(r);if("object"===typeof i)return a.complete(i);if(i)if(f++,a.return_docs&&v.push(r),a.include_docs&&a.attachments&&n.data._attachments){var o=[];for(var c in n.data._attachments){var u=x(c,n,r.doc,a.binary);o.push(u),_.push(u)}Promise.all(o).then((function(){a.onChange(r)}))}else a.onChange(r);f!==s&&t.continue()}}function h(){Promise.all(_).then((function(){a.complete(null,{results:v,last_seq:l})}))}c=a.descending?u.openCursor(null,"prev"):u.openCursor(IDBKeyRange.lowerBound(a.since,!0)),e.txn.oncomplete=h,c.onsuccess=p}function J(e,t,n){if(e.error)return n(e.error);var r=e.txn.objectStore(j).get(t);r.onsuccess=function(e){e.target.result?n(null,e.target.result.rev_tree):n(Object(s["n"])(s["g"]))}}function U(e,t,n,r){if(e.error)return r(e.error);var a=e.txn.objectStore(j);a.get(t).onsuccess=function(e){var t=e.target.result;Object(c["h"])(t.rev_tree,(function(e,t,r,a,i){var o=t+"-"+r;-1!==n.indexOf(o)&&(i.status="missing")}));var r=[];n.forEach((function(e){if(e in t.revs){if(t.revs[e].data._attachments)for(var n in t.revs[e].data._attachments)r.push(t.revs[e].data._attachments[n].digest);delete t.revs[e]}})),r.forEach((function(e){n.forEach((function(n){delete t.attachments[e].revs[n]})),Object.keys(t.attachments[e].revs).length||delete t.attachments[e]})),a.put(t)},e.txn.oncomplete=function(){r()}}function Y(e,t,n,r){function a(){var n=indexedDB.deleteDatabase(e.name);n.onsuccess=function(){delete t[e.name],r(null,{ok:!0})}}n.removeAllListeners(e.name),e.name in t?t[e.name].then((function(e){e.idb.close(),a()})):a()}var H=null,Q="ï¿¿",W=Number.NEGATIVE_INFINITY,X=[[[[[[[[[[[[]]]]]]]]]]]];function ee(e){var t=e.revs[e.rev].data;return t._id=e.id,t._rev=e.rev,e.deleted&&(t._deleted=!0),t}function te(e){function t(e,t){return void 0!==e[t]}function n(e,t){var n=[0].concat(e);return n.map((function(e){if(null===e&&t)return u;if(!0===e)return f;if(!1===e)return d;if(!t){if(e===H)return W;if(Object.prototype.hasOwnProperty.call(e,Q))return X}return e}))}if(t(e,"inclusive_end")||(e.inclusive_end=!0),t(e,"inclusive_start")||(e.inclusive_start=!0),e.descending){var r=e.startkey,a=e.inclusive_start;e.startkey=e.endkey,e.endkey=r,e.inclusive_start=e.inclusive_end,e.inclusive_end=a}try{return t(e,"key")?IDBKeyRange.only(n(e.key,!0)):t(e,"startkey")&&!t(e,"endkey")?IDBKeyRange.lowerBound(n(e.startkey),!e.inclusive_start):!t(e,"startkey")&&t(e,"endkey")?IDBKeyRange.upperBound(n(e.endkey),!e.inclusive_end):t(e,"startkey")&&t(e,"endkey")?IDBKeyRange.bound(n(e.startkey),n(e.endkey),!e.inclusive_start,!e.inclusive_end):IDBKeyRange.only([0])}catch(i){throw console.error("Could not generate keyRange",i,e),Error("Could not generate key range with "+JSON.stringify(e))}}function ne(e,t,n){var r=I(t);return new Promise((function(a){e._openTransactionSafely([j],"readonly",(function(i,o){if(i)return k(n)(i);o.onabort=k(n),o.ontimeout=k(n);var s=Array.from(o.objectStore(j).indexNames);-1===s.indexOf(r)?e._freshen().then((function(){return ne(e,t,n)})).then(a):a(o.objectStore(j).index(r))}))}))}function re(e,t,n){var r=this,a=t.split("/");return new Promise((function(e,t){r.get("_design/"+a[0]).then((function(i){var o=D(i,a[1]);if(!o)throw new Error("ddoc "+i._id+" with view "+a[1]+" does not have map.options.def.fields defined.");var s=n.skip,c=Number.isInteger(n.limit)&&n.limit;return ne(r,o,t).then((function(r){var a=te(n),i=r.openCursor(a,n.descending?"prev":"next"),o=[];i.onerror=k(t),i.onsuccess=function(t){var n=t.target.result;return n&&0!==c?s?(n.advance(s),void(s=!1)):(c&&(c-=1),o.push({doc:ee(n.value)}),void n.continue()):e({rows:o})}}))})).catch(t)}))}function ae(){return Promise.resolve()}var ie="indexeddb",oe=new o["b"],se={};function ce(e,t){e.view_adapter&&console.log("Please note that the indexeddb adapter manages _find indexes itself, therefore it is not using your specified view_adapter");var n=this,r={},a=function(t){return function(){var a=Array.prototype.slice.call(arguments);C(se,n,e).then((function(e){r=e.metadata,a.unshift(e.idb),t.apply(n,a)})).catch((function(e){var t=a.pop();"function"===typeof t?t(e):console.error(e)}))}},i=function(t){return function(){var a=Array.prototype.slice.call(arguments);return C(se,n,e).then((function(e){return r=e.metadata,a.unshift(e.idb),t.apply(n,a)}))}},o=function(t,a,i){return a=a||[j],i=i||"readonly",function(){var o=Array.prototype.slice.call(arguments),s={};C(se,n,e).then((function(e){r=e.metadata,s.txn=e.idb.transaction(a,i)})).catch((function(e){console.error("Failed to establish transaction safely"),console.error(e),s.error=e})).then((function(){o.unshift(s),t.apply(n,o)}))}};n._openTransactionSafely=function(e,t,n){o((function(e,t){t(e.error,e.txn)}),e,t)(n)},n._remote=!1,n.type=function(){return ie},n._id=a((function(e,t){t(null,r.db_uuid)})),n._info=a((function(e,t){return K(r,t)})),n._get=o(T),n._bulkDocs=a((function(t,a,i,o){V(n,a,i,r,e,oe,o)})),n._allDocs=o((function(e,t,n){Z(e,r,t,n)})),n._getAttachment=o(M),n._changes=o((function(t,r){$(t,oe,n,e,r)})),n._getRevisionTree=o(J),n._doCompaction=o(U,[j],"readwrite"),n._customFindAbstractMapper={query:i(re),viewCleanup:i(ae)},n._destroy=function(t,n){return Y(e,se,oe,n)},n._close=a((function(t,n){delete se[e.name],t.close(),n()})),n._freshen=function(){return new Promise((function(e){n._close((function(){a(e)()}))}))},setTimeout((function(){t(null,n)}))}function ue(e){e.adapter(ie,ce,!0)}ce.valid=function(){return!0},t["default"]=ue},c297:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return h}));var r=n("0b2c"),a=(n("d1f3"),n("63ab"),n("bbbc")),i=n("6bf1"),o=n("d533");function s(e,t){var n=t.keys,a={offset:t.skip};return Promise.all(n.map((function(n){var i=Object(r["a"])({key:n,deleted:"ok"},t);return["limit","skip","keys"].forEach((function(e){delete i[e]})),new Promise((function(r,o){e._allDocs(i,(function(e,i){if(e)return o(e);t.update_seq&&void 0!==i.update_seq&&(a.update_seq=i.update_seq),a.total_rows=i.total_rows,r(i.rows[0]||{key:n,error:"not_found"})}))}))}))).then((function(e){return a.rows=e,a}))}function c(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})}n.d(t,"b",(function(){return o["c"]})),n.d(t,"c",(function(){return o["d"]}));var u=c(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),d=c(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function f(e){if(!/^\d+-/.test(e))return Object(i["n"])(i["f"]);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function l(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,a=[r[0],t,[]],i=1,o=r.length;i<o;i++)a=[r[i],{status:"missing"},[a]];return[{pos:n,ids:a}]}function v(e,t,n){var a,o,s;n||(n={deterministic_revs:!0});var c={status:"available"};if(e._deleted&&(c.deleted=!0),t)if(e._id||(e._id=Object(r["n"])()),o=Object(r["k"])(e,n.deterministic_revs),e._rev){if(s=f(e._rev),s.error)return s;e._rev_tree=[{pos:s.prefix,ids:[s.id,{status:"missing"},[[o,c,[]]]]}],a=s.prefix+1}else e._rev_tree=[{pos:1,ids:[o,c,[]]}],a=1;else if(e._revisions&&(e._rev_tree=l(e._revisions,c),a=e._revisions.start,o=e._revisions.ids[0]),!e._rev_tree){if(s=f(e._rev),s.error)return s;a=s.prefix,o=s.id,e._rev_tree=[{pos:a,ids:[o,c,[]]}]}Object(r["h"])(e._id),e._rev=a+"-"+o;var v={metadata:{},data:{}};for(var _ in e)if(Object.prototype.hasOwnProperty.call(e,_)){var p="_"===_[0];if(p&&!u[_]){var h=Object(i["n"])(i["c"],_);throw h.message=i["c"].message+": "+_,h}p&&!d[_]?v.metadata[_.slice(1)]=e[_]:v.data[_]=e[_]}return v}function _(e,t,n,r,a,s,c,u){if(Object(o["g"])(t.rev_tree,n.metadata.rev)&&!u)return r[a]=n,s();var d=t.winningRev||Object(o["i"])(t),f="deleted"in t?t.deleted:Object(o["c"])(t,d),l="deleted"in n.metadata?n.metadata.deleted:Object(o["c"])(n.metadata),_=/^1-/.test(n.metadata.rev);if(f&&!l&&u&&_){var p=n.data;p._rev=d,p._id=n.metadata.id,n=v(p,u)}var h=Object(o["f"])(t.rev_tree,n.metadata.rev_tree[0],e),m=u&&(f&&l&&"new_leaf"!==h.conflicts||!f&&"new_leaf"!==h.conflicts||f&&!l&&"new_branch"===h.conflicts);if(m){var g=Object(i["n"])(i["l"]);return r[a]=g,s()}var b=n.metadata.rev;n.metadata.rev_tree=h.tree,n.stemmedRevs=h.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var y,w=Object(o["i"])(n.metadata),j=Object(o["c"])(n.metadata,w),O=f===j?0:f<j?-1:1;y=b===w?j:Object(o["c"])(n.metadata,b),c(n,w,j,y,!0,O,a,s)}function p(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}function h(e,t,n,r,s,c,u,d,f){function l(e,t,n){var r=Object(o["i"])(e.metadata),a=Object(o["c"])(e.metadata,r);if("was_delete"in d&&a)return c[t]=Object(i["n"])(i["g"],"deleted"),n();var s=v&&p(e);if(s){var f=Object(i["n"])(i["l"]);return c[t]=f,n()}var l=a?0:1;u(e,r,a,a,!1,l,t,n)}e=e||1e3;var v=d.new_edits,h=new a["a"],m=0,g=t.length;function b(){++m===g&&f&&f()}t.forEach((function(e,t){if(e._id&&Object(o["d"])(e._id)){var r=e._deleted?"_removeLocal":"_putLocal";n[r](e,{ctx:s},(function(e,n){c[t]=e||n,b()}))}else{var a=e.metadata.id;h.has(a)?(g--,h.get(a).push([e,t])):h.set(a,[[e,t]])}})),h.forEach((function(t,n){var a=0;function i(){++a<t.length?s():b()}function s(){var s=t[a],d=s[0],f=s[1];if(r.has(n))_(e,r.get(n),d,c,f,i,u,v);else{var p=Object(o["f"])([],d.metadata.rev_tree[0],e);d.metadata.rev_tree=p.tree,d.stemmedRevs=p.stemmedRevs||[],l(d,f,i)}}s()}))}},d533:function(e,t,n){"use strict";function r(e){var t,n,r,a,i=e.rev_tree.slice();while(a=i.pop()){var o=a.ids,s=o[2],c=a.pos;if(s.length)for(var u=0,d=s.length;u<d;u++)i.push({pos:c+1,ids:s[u]});else{var f=!!o[1].deleted,l=o[0];t&&!(r!==f?r:n!==c?n<c:t<l)||(t=l,n=c,r=f)}}return n+"-"+t}function a(e,t){var n,r=e.slice();while(n=r.pop())for(var a=n.pos,i=n.ids,o=i[2],s=t(0===o.length,a,i[0],n.ctx,i[1]),c=0,u=o.length;c<u;c++)r.push({pos:a+1,ids:o[c],ctx:s})}function i(e,t){return e.pos-t.pos}function o(e){var t=[];a(e,(function(e,n,r,a,i){e&&t.push({rev:n+"-"+r,pos:n,opts:i})})),t.sort(i).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function s(e){for(var t=r(e),n=o(e.rev_tree),a=[],i=0,s=n.length;i<s;i++){var c=n[i];c.rev===t||c.opts.deleted||a.push(c.rev)}return a}function c(e){var t=[];return a(e.rev_tree,(function(e,n,r,a,i){"available"!==i.status||e||(t.push(n+"-"+r),i.status="missing")})),t}function u(e){var t,n=[],r=e.slice();while(t=r.pop()){var a=t.pos,i=t.ids,o=i[0],s=i[1],c=i[2],u=0===c.length,d=t.history?t.history.slice():[];d.push({id:o,opts:s}),u&&n.push({pos:a+1-d.length,ids:d});for(var f=0,l=c.length;f<l;f++)r.push({pos:a+1,ids:c[f],history:d})}return n.reverse()}function d(e,t){return e.pos-t.pos}function f(e,t,n){var r,a=0,i=e.length;while(a<i)r=a+i>>>1,n(e[r],t)<0?a=r+1:i=r;return a}function l(e,t,n){var r=f(e,t,n);e.splice(r,0,t)}function v(e,t){for(var n,r,a=t,i=e.length;a<i;a++){var o=e[a],s=[o.id,o.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function _(e,t){return e[0]<t[0]?-1:1}function p(e,t){var n=[{tree1:e,tree2:t}],r=!1;while(n.length>0){var a=n.pop(),i=a.tree1,o=a.tree2;(i[1].status||o[1].status)&&(i[1].status="available"===i[1].status||"available"===o[1].status?"available":"missing");for(var s=0;s<o[2].length;s++)if(i[2][0]){for(var c=!1,u=0;u<i[2].length;u++)i[2][u][0]===o[2][s][0]&&(n.push({tree1:i[2][u],tree2:o[2][s]}),c=!0);c||(r="new_branch",l(i[2],o[2][s],_))}else r="new_leaf",i[2][0]=o[2][s]}return{conflicts:r,tree:e}}function h(e,t,n){var r,a=[],i=!1,o=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var s=0,c=e.length;s<c;s++){var u=e[s];if(u.pos===t.pos&&u.ids[0]===t.ids[0])r=p(u.ids,t.ids),a.push({pos:u.pos,ids:r.tree}),i=i||r.conflicts,o=!0;else if(!0!==n){var f=u.pos<t.pos?u:t,l=u.pos<t.pos?t:u,v=l.pos-f.pos,_=[],h=[];h.push({ids:f.ids,diff:v,parent:null,parentIdx:null});while(h.length>0){var m=h.pop();if(0!==m.diff)for(var g=m.ids[2],b=0,y=g.length;b<y;b++)h.push({ids:g[b],diff:m.diff-1,parent:m.ids,parentIdx:b});else m.ids[0]===l.ids[0]&&_.push(m)}var w=_[0];w?(r=p(w.ids,l.ids),w.parent[2][w.parentIdx]=r.tree,a.push({pos:f.pos,ids:f.ids}),i=i||r.conflicts,o=!0):a.push(u)}else a.push(u)}return o||a.push(t),a.sort(d),{tree:a,conflicts:i||"internal_node"}}function m(e,t){for(var n,r,i=u(e),o=0,s=i.length;o<s;o++){var c,d=i[o],f=d.ids;if(f.length>t){n||(n={});var l=f.length-t;c={pos:d.pos+l,ids:v(f,l)};for(var _=0;_<l;_++){var p=d.pos+_+"-"+f[_].id;n[p]=!0}}else c={pos:d.pos,ids:v(f,0)};r=r?h(r,c,!0).tree:[c]}return n&&a(r,(function(e,t,r){delete n[t+"-"+r]})),{tree:r,revs:n?Object.keys(n):[]}}function g(e,t,n){var r=h(e,t),a=m(r.tree,n);return{tree:a.tree,stemmedRevs:a.revs,conflicts:r.conflicts}}function b(e,t){var n,r=e.slice(),a=t.split("-"),i=parseInt(a[0],10),o=a[1];while(n=r.pop()){if(n.pos===i&&n.ids[0]===o)return!0;for(var s=n.ids[2],c=0,u=s.length;c<u;c++)r.push({pos:n.pos+1,ids:s[c]})}return!1}function y(e){return e.ids}function w(e,t){t||(t=r(e));var n,a=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(y);while(n=i.pop()){if(n[0]===a)return!!n[1].deleted;i=i.concat(n[2])}}function j(e){return/^_local/.test(e)}function O(e,t){var n,r=t.rev_tree.slice();while(n=r.pop()){var a=n.pos,i=n.ids,o=i[0],s=i[1],c=i[2],u=0===c.length,d=n.history?n.history.slice():[];if(d.push({id:o,pos:a,opts:s}),u)for(var f=0,l=d.length;f<l;f++){var v=d[f],_=v.pos+"-"+v.id;if(_===e)return a+"-"+o}for(var p=0,h=c.length;p<h;p++)r.push({pos:a+1,ids:c[p],history:d})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return j})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return a})),n.d(t,"i",(function(){return r})),n.d(t,"e",(function(){return O}))}}]);